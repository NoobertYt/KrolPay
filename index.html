<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KrolPay — Пополнение Steam</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #ffd57a 0%, #ff9bd6 100%);
      --secondary-gradient: linear-gradient(135deg, #9be6ff 0%, #647eff 100%);
      --dark-bg: #0f172a;
      --darker-bg: #071033;
    }
    
    body { 
      font-family: 'Inter', sans-serif;
      background: var(--dark-bg);
      color: #f8fafc;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 15% 50%, rgba(255, 213, 122, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 85% 30%, rgba(155, 230, 255, 0.1) 0%, transparent 20%),
        radial-gradient(circle at 50% 80%, rgba(255, 155, 214, 0.1) 0%, transparent 20%);
      z-index: -1;
    }
    
    .glass {
      background: rgba(15, 23, 42, 0.6);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .glass-light {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    .btn-primary {
      background: var(--primary-gradient);
      color: #0f172a;
      font-weight: 700;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 213, 122, 0.3);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(255, 213, 122, 0.4);
    }
    
    .btn-secondary {
      background: var(--secondary-gradient);
      color: white;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(100, 126, 255, 0.3);
    }
    
    /* Анимации */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s ease;
    }
    
    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .scale-in {
      opacity: 0;
      transform: scale(0.95);
      transition: all 0.6s ease;
    }
    
    .scale-in.visible {
      opacity: 1;
      transform: scale(1);
    }
    
    .slide-up {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease;
    }
    
    .slide-up.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 213, 122, 0.4); }
      70% { box-shadow: 0 0 0 10px rgba(255, 213, 122, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 213, 122, 0); }
    }
    
    /* Кастомный ползунок */
    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.1);
      outline: none;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--primary-gradient);
      cursor: pointer;
      box-shadow: 0 0 10px rgba(255, 213, 122, 0.5);
    }
    
    /* Стили для спойлера */
    .spoiler-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease;
    }
    
    .spoiler-toggle:checked ~ .spoiler-content {
      max-height: 500px;
    }
    
    /* Анимация появления элементов при прокрутке */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease;
    }
    
    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Стили для счетчика */
    .counter {
      font-variant-numeric: tabular-nums;
      font-weight: 800;
    }
    
    /* Стили для спиннера загрузки */
    .spinner {
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top: 3px solid #ffd57a;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      display: inline-block;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Анимация уведомления */
    .notification-slide {
      transform: translateX(100%);
      transition: transform 0.5s ease;
    }
    
    .notification-slide.show {
      transform: translateX(0);
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-[#0f172a] to-[#071033] text-slate-100">

  <!-- Уведомление -->
  <div id="notification" class="fixed top-4 right-4 z-50 glass rounded-xl p-4 shadow-xl notification-slide">
    <div class="flex items-center gap-3">
      <i class="text-emerald-400 text-xl" id="notification-icon"></i>
      <p id="notification-text" class="text-sm"></p>
    </div>
  </div>

  <!-- Модальное окно -->
  <div id="modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity duration-300">
    <div class="glass rounded-2xl p-6 max-w-md w-full mx-4 scale-95 transform transition-transform duration-300">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold" id="modal-title"></h3>
        <button onclick="closeModal()" class="text-slate-400 hover:text-white">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <p id="modal-content" class="text-slate-300 mb-6"></p>
      <div class="flex justify-end">
        <button onclick="closeModal()" class="btn-primary px-4 py-2 rounded-xl">Понятно</button>
      </div>
    </div>
  </div>

  <div class="max-w-4xl mx-auto px-4 py-8">
    <!-- Header -->
    <header class="flex items-center justify-between mb-10 fade-in">
      <div class="flex items-center gap-4">
        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-[#ffd57a] to-[#ff9bd6] flex items-center justify-center shadow-xl pulse">
          <span class="text-2xl font-extrabold text-[#071033]">KP</span>
        </div>
        <div>
          <h1 class="text-3xl font-extrabold">KrolPay</h1>
          <p class="text-sm text-slate-400">Быстрое пополнение Steam</p>
        </div>
      </div>
      
      <div class="hidden md:flex items-center gap-4">
        <div class="glass-light px-4 py-2 rounded-xl flex items-center gap-2">
          <i class="fas fa-users text-cyan-400"></i>
          <span class="text-sm">Клиентов: <span id="clientsCount" class="counter">1000+</span></span>
        </div>
        <div class="glass-light px-4 py-2 rounded-xl flex items-center gap-2">
          <i class="fas fa-wallet text-purple-400"></i>
          <span class="text-sm">Пополнено: <span id="totalAmount" class="counter">542800</span> ₽</span>
        </div>
      </div>
    </header>

    <!-- Hero Section -->
    <section class="glass rounded-3xl p-8 mb-10 relative overflow-hidden scale-in">
      <div class="absolute -right-10 -top-10 w-40 h-40 rounded-full bg-gradient-to-br from-[#ffd57a] to-[#ff9bd6] opacity-20"></div>
      <div class="absolute -left-10 -bottom-10 w-32 h-32 rounded-full bg-gradient-to-br from-[#9be6ff] to-[#647eff] opacity-20"></div>
      
      <div class="relative z-10">
        <h2 class="text-4xl font-bold mb-4">Пополнение Steam</h2>
        <p class="text-lg text-slate-300 mb-6">Быстро, выгодно и безопасно. Получите игровую валюту в пару кликов!</p>
        
        <div class="grid md:grid-cols-3 gap-4 mb-6">
          <div class="bg-gradient-to-br from-[#0f172a] to-[#1e293b] p-4 rounded-xl border border-slate-800">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 rounded-lg bg-cyan-900 flex items-center justify-center">
                <i class="fas fa-bolt text-cyan-400"></i>
              </div>
              <h3 class="font-semibold">Мгновенно</h3>
            </div>
            <p class="text-sm text-slate-400">Зачисление в течение 5 минут после оплаты</p>
          </div>
          
          <div class="bg-gradient-to-br from-[#0f172a] to-[#1e293b] p-4 rounded-xl border border-slate-800">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 rounded-lg bg-purple-900 flex items-center justify-center">
                <i class="fas fa-percent text-purple-400"></i>
              </div>
              <h3 class="font-semibold">Выгодно</h3>
            </div>
            <p class="text-sm text-slate-400">Лучшие цены и регулярные акции</p>
          </div>
          
          <div class="bg-gradient-to-br from-[#0f172a] to-[#1e293b] p-4 rounded-xl border border-slate-800">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-10 h-10 rounded-lg bg-emerald-900 flex items-center justify-center">
                <i class="fas fa-shield-alt text-emerald-400"></i>
              </div>
              <h3 class="font-semibold">Безопасно</h3>
            </div>
            <p class="text-sm text-slate-400">Гарантия возврата при проблемах</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Order Form -->
    <main class="glass p-8 rounded-3xl shadow-xl mb-10 scale-in">
      <h3 class="text-2xl font-bold mb-6 text-center">Оформление заказа</h3>
      
      <div class="grid md:grid-cols-2 gap-6 mb-6">
        <div>
          <label class="text-sm text-slate-400 mb-2 block">Сумма пополнения</label>
          <div class="glass-light p-4 rounded-xl mb-4">
            <input id="amountRange" type="range" min="50" max="5000" step="50" value="500" class="w-full mb-3">
            <div class="flex justify-between text-sm">
              <span>50 ₽</span>
              <span>5000 ₽</span>
            </div>
          </div>
          
          <div class="flex justify-between items-center mb-6">
            <div>
              <p class="text-sm text-slate-400">Сумма внутр. счета:</p>
              <p id="amountLabel" class="text-xl font-bold">500 ₽</p>
            </div>
            <div class="text-right">
              <p class="text-sm text-slate-400">К оплате:</p>
              <p id="costLabel" class="text-xl font-bold">850 ₽</p>
            </div>
          </div>
        </div>
        
        <div>
          <label class="text-sm text-slate-400 mb-2 block">Промокод</label>
          <div class="flex gap-2 mb-4">
            <input id="promoInput" class="flex-1 bg-slate-900 border border-slate-700 rounded-xl px-4 py-3" placeholder="Введите промокод">
            <button id="promoBtn" class="px-4 py-3 bg-gradient-to-r from-[#9be6ff] to-[#647eff] text-white rounded-xl font-semibold">Применить</button>
          </div>
          <p id="promoMsg" class="text-sm mb-4"><span class="text-cyan-400"><i class="fas fa-gift mr-2"></i>KotoKrol даёт скидку 5%</span></p>
          
          <div class="bg-slate-900 rounded-xl p-3 mb-4 text-sm">
            <label class="flex items-center cursor-pointer">
              <input type="checkbox" id="agreeTerms" class="mr-2">
              <span>Я согласен с <a href="#" onclick="showTerms()" class="text-cyan-400 hover:underline">условиями обслуживания</a></span>
            </label>
          </div>
        </div>
      </div>
      
      <div class="grid md:grid-cols-2 gap-6 mb-6">
        <div>
          <label class="text-sm text-slate-400 mb-2 block">Логин Steam</label>
          <input id="steamLogin" class="w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3" placeholder="Введите логин Steam">
          <p class="text-xs text-slate-500 mt-2">Тот, который вы используете для входа</p>
        </div>
        
        <div>
          <label class="text-sm text-slate-400 mb-2 block">Telegram-никнейм</label>
          <input id="tgNick" class="w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3" placeholder="@nickname">
          <p class="text-xs text-slate-500 mt-2">Для связи с менеджером</p>
        </div>
      </div>

      <button id="submitBtn" class="mt-4 w-full px-4 py-4 rounded-xl btn-primary text-lg font-bold" onclick="validateOrder()">
        Оформить заказ
      </button>
      
      <div id="resultMsg" class="mt-4 text-center text-sm hidden">
        <div class="p-4 rounded-xl glass-light">
          <p id="resultText"></p>
        </div>
      </div>
    </main>

    <!-- How it works -->
    <section class="glass rounded-3xl p-8 mb-10 slide-up">
      <h3 class="text-2xl font-bold mb-6 text-center">Как это работает?</h3>
      
      <div class="grid md:grid-cols-4 gap-4">
        <div class="text-center p-4">
          <div class="w-16 h-16 rounded-2xl bg-cyan-900 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-clipboard-list text-cyan-400 text-2xl"></i>
          </div>
          <h4 class="font-bold mb-2">1. Заполните форму</h4>
          <p class="text-sm text-slate-300">Укажите логин Steam и сумму пополнения</p>
        </div>
        
        <div class="text-center p-4">
          <div class="w-16 h-16 rounded-2xl bg-purple-900 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-money-bill-wave text-purple-400 text-2xl"></i>
          </div>
          <h4 class="font-bold mb-2">2. Оплатите заказ</h4>
          <p class="text-sm text-slate-300">Выберите удобный способ оплаты</p>
        </div>
        
        <div class="text-center p-4">
          <div class="w-16 h-16 rounded-2xl bg-amber-900 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-headset text-amber-400 text-2xl"></i>
          </div>
          <h4 class="font-bold mb-2">3. Связь с менеджером</h4>
          <p class="text-sm text-slate-300">Менеджер свяжется в Telegram для подтверждения</p>
        </div>
        
        <div class="text-center p-4">
          <div class="w-16 h-16 rounded-2xl bg-emerald-900 flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-gamepad text-emerald-400 text-2xl"></i>
          </div>
          <h4 class="font-bold mb-2">4. Получите пополнение</h4>
          <p class="text-sm text-slate-300">Средства зачислятся на ваш аккаунт</p>
        </div>
      </div>
    </section>

    <!-- Reviews -->
    <section class="mb-10 slide-up">
      <h3 class="text-2xl font-bold mb-6 text-center">Отзывы наших клиентов</h3>
      
      <div class="splide" aria-label="Отзывы клиентов">
        <div class="splide__track">
          <ul class="splide__list">
            <li class="splide__slide">
              <div class="glass p-6 rounded-2xl h-full">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 rounded-full bg-gradient-to-br from-[#ffd57a] to-[#ff9bd6] flex items-center justify-center text-white font-bold">И</div>
                  <div class="ml-4">
                    <h4 class="font-semibold">Иван</h4>
                    <div class="flex text-amber-400">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                  </div>
                </div>
                <p class="text-slate-300">"Пополнил за 2 минуты, всё быстро и удобно! Менеджер ответил моментально, деньги пришли на счет сразу после оплаты."</p>
              </div>
            </li>
            
            <li class="splide__slide">
              <div class="glass p-6 rounded-2xl h-full">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 rounded-full bg-gradient-to-br from-[#9be6ff] to-[#647eff] flex items-center justify-center text-white font-bold">А</div>
                  <div class="ml-4">
                    <h4 class="font-semibold">Алина</h4>
                    <div class="flex text-amber-400">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                  </div>
                </div>
                <p class="text-slate-300">"Менеджер сразу написал в телеграм, всё супер! Объяснил каждый шаг, помог с выбором суммы. Обязательно воспользуюсь ещё."</p>
              </div>
            </li>
            
            <li class="splide__slide">
              <div class="glass p-6 rounded-2xl h-full">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 rounded-full bg-gradient-to-br from-[#ff9bd6] to-[#9be6ff] flex items-center justify-center text-white font-bold">Д</div>
                  <div class="ml-4">
                    <h4 class="font-semibold">Дмитрий</h4>
                    <div class="flex text-amber-400">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                  </div>
                </div>
                <p class="text-slate-300">"С промокодом KotoKrol ещё и скидка, топ! Сэкономил прилично, по сравнению с официальными способами пополнения."</p>
              </div>
            </li>
            
            <li class="splide__slide">
              <div class="glass p-6 rounded-2xl h-full">
                <div class="flex items-center mb-4">
                  <div class="w-12 h-12 rounded-full bg-gradient-to-br from-[#647eff] to-[#ffd57a] flex items-center justify-center text-white font-bold">М</div>
                  <div class="ml-4">
                    <h4 class="font-semibold">Мария</h4>
                    <div class="flex text-amber-400">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                    </div>
                  </div>
                </div>
                <p class="text-slate-300">"Никогда не думала, что пополнение Steam может быть настолько простым. Удобно, что можно оплатить разными способами."</p>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="glass rounded-3xl p-8 mb-10 slide-up">
      <h3 class="text-2xl font-bold mb-6 text-center">Частые вопросы</h3>
      
      <div class="space-y-4">
        <div>
          <input type="checkbox" id="faq1" class="spoiler-toggle hidden">
          <label for="faq1" class="flex items-center justify-between cursor-pointer p-4 bg-slate-900 rounded-xl">
            <span class="font-semibold">Как быстро придут средства?</span>
            <i class="fas fa-chevron-down transition-transform duration-300"></i>
          </label>
          <div class="spoiler-content">
            <div class="p-4 bg-slate-800 rounded-b-xl">
              <p class="text-slate-300">Обычно пополнение происходит в течение 5-15 минут после подтверждения оплаты. В редких случаях, при высокой нагрузке на сервера Steam, это может занять до 1 часа.</p>
            </div>
          </div>
        </div>
        
        <div>
          <input type="checkbox" id="faq2" class="spoiler-toggle hidden">
          <label for="faq2" class="flex items-center justify-between cursor-pointer p-4 bg-slate-900 rounded-xl">
            <span class="font-semibold">Это безопасно?</span>
            <i class="fas fa-chevron-down transition-transform duration-300"></i>
          </label>
          <div class="spoiler-content">
            <div class="p-4 bg-slate-800 rounded-b-xl">
              <p class="text-slate-300">Да, наш сервис полностью безопасен. Мы не запрашиваем пароль от вашего аккаунта Steam, только логин. Все операции проводятся в соответствии с правилами платформы.</p>
            </div>
          </div>
        </div>
        
        <div>
          <input type="checkbox" id="faq3" class="spoiler-toggle hidden">
          <label for="faq3" class="flex items-center justify-between cursor-pointer p-4 bg-slate-900 rounded-xl">
            <span class="font-semibold">Какие способы оплаты вы принимаете?</span>
            <i class="fas fa-chevron-down transition-transform duration-300"></i>
          </label>
          <div class="spoiler-content">
            <div class="p-4 bg-slate-800 rounded-b-xl">
              <p class="text-slate-300">Мы принимаем оплату через банковские карты (Visa, Mastercard, Мир), Qiwi, ЮMoney, а также криптовалюту (Bitcoin, USDT). После оформления заказа менеджер предложит доступные варианты.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center text-slate-500 text-sm fade-in pt-10">
      <div class="glass rounded-3xl p-6 mb-6">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-6">
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-[#ffd57a] to-[#ff9bd6] flex items-center justify-center">
              <span class="text-lg font-extrabold text-[#071033]">KP</span>
            </div>
            <div class="text-left">
              <h4 class="font-bold text-white">KrolPay</h4>
              <p>Пополнение Steam от доверенного партнера</p>
            </div>
          </div>
          
          <div class="flex gap-4">
            <a href="https://t.me/krol_support" target="_blank" class="w-10 h-10 rounded-full glass-light flex items-center justify-center hover:bg-cyan-900 transition-colors">
              <i class="fab fa-telegram text-cyan-400"></i>
            </a>
            <a href="https://discord.gg/example" target="_blank" class="w-10 h-10 rounded-full glass-light flex items-center justify-center hover:bg-purple-900 transition-colors">
              <i class="fab fa-discord text-purple-400"></i>
            </a>
            <a href="mailto:support@krolpay.ru" class="w-10 h-10 rounded-full glass-light flex items-center justify-center hover:bg-slate-700 transition-colors">
              <i class="fas fa-envelope text-slate-400"></i>
            </a>
          </div>
        </div>
        
        <div class="border-t border-slate-800 pt-6">
          <p>KrolPay © 2025 | Контакты: @krol_support | <a href="#" onclick="showPrivacy()" class="text-cyan-400 hover:underline">Политика конфиденциальности</a></p>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // ===== КОНФИГУРАЦИЯ =====
    // Легко изменяемые параметры
    const config = {
      rate: 1.7, // Курс обмена: 1.7 рубля = 1 рубль пополнения
      initialClientsCount: "1000+", // Начальное количество клиентов
      initialTotalAmount: 542800, // Начальная сумма пополнений
      webhookUrl: "https://discord.com/api/webhooks/1337126107543113730/1JgKSZi4fKDYZnRXq9Dy60mHFMumh2gjPr48T02uvu9113WfHyzbU6CJf2dDei5Uy6gL",
      discountRate: 0.05 // 5% скидка по промокоду
    };
    // ========================

    const rate = config.rate;
    const discountRate = config.discountRate;
    let promoApplied = false;
    let ordersCount = config.initialClientsCount === "1000+" ? 1000 : parseInt(config.initialClientsCount);
    let totalAmount = config.initialTotalAmount;

    // Инициализация элементов DOM после загрузки страницы
    document.addEventListener('DOMContentLoaded', function() {
      const amountRange = document.getElementById("amountRange");
      const amountLabel = document.getElementById("amountLabel");
      const costLabel = document.getElementById("costLabel");
      const promoInput = document.getElementById("promoInput");
      const promoMsg = document.getElementById("promoMsg");
      const resultMsg = document.getElementById("resultMsg");
      const resultText = document.getElementById("resultText");
      const clientsCount = document.getElementById("clientsCount");
      const totalAmountEl = document.getElementById("totalAmount");
      
      // Установка начальных значений
      clientsCount.textContent = config.initialClientsCount;
      totalAmountEl.textContent = config.initialTotalAmount.toLocaleString('ru-RU');
      
      // Инициализация слайдера отзывов
      new Splide('.splide', {
        type: 'loop',
        perPage: 3,
        perMove: 1,
        gap: '1.5rem',
        breakpoints: {
          1024: {
            perPage: 2,
          },
          768: {
            perPage: 1,
          },
        },
        autoplay: true,
        interval: 5000,
        pauseOnHover: true,
      }).mount();
      
      // Обновление счетчиков с анимацией
      function updateCounters() {
        if (config.initialClientsCount !== "1000+") {
          animateCounter(clientsCount, ordersCount, 1500);
        }
        animateCounter(totalAmountEl, totalAmount, 2000);
      }
      
      function animateCounter(element, target, duration) {
        const start = 0;
        const increment = target / (duration / 16);
        let current = start;
        
        const timer = setInterval(() => {
          current += increment;
          if (current >= target) {
            clearInterval(timer);
            current = target;
          }
          element.textContent = Math.round(current).toLocaleString('ru-RU');
        }, 16);
      }
      
      // Форматирование суммы в рублях
      function formatRub(v){ 
        return v.toLocaleString('ru-RU') + " ₽"; 
      }
      
      // Обновление суммы заказа
      function updateSum(){
        const amount = +amountRange.value;
        const base = amount * rate;
        amountLabel.textContent = formatRub(amount);
        costLabel.textContent = promoApplied ? formatRub(base * (1 - discountRate)) : formatRub(base);
      }
      
      // Обработчики событий
      amountRange.addEventListener("input", updateSum);
      
      document.getElementById("promoBtn").addEventListener("click", function(){
        if(promoInput.value.trim().toLowerCase() === "kotokrol"){
          promoApplied = true;
          promoMsg.innerHTML = '<span class="text-emerald-400"><i class="fas fa-check-circle mr-2"></i>Промокод применён! Скидка 5%</span>';
          showNotification('Промокод успешно применен! Скидка 5%', 'success');
        } else {
          promoApplied = false;
          promoMsg.innerHTML = '<span class="text-rose-400"><i class="fas fa-times-circle mr-2"></i>Неверный промокод</span>';
          showNotification('Неверный промокод', 'error');
        }
        updateSum();
      });
      
      // Проверка формы перед отправкой
      window.validateOrder = function() {
        const steamLogin = document.getElementById("steamLogin").value.trim();
        const tgNick = document.getElementById("tgNick").value.trim();
        const agreeTerms = document.getElementById("agreeTerms").checked;
        
        if(!steamLogin || !tgNick){
          showNotification('Заполните все поля!', 'error');
          return;
        }
        
        if(!agreeTerms) {
          showNotification('Необходимо согласие с условиями!', 'error');
          return;
        }
        
        // Показываем спиннер загрузки
        const submitBtn = document.getElementById("submitBtn");
        submitBtn.innerHTML = '<div class="spinner mr-2"></div> Обработка...';
        submitBtn.disabled = true;
        
        // Имитация задержки обработки
        setTimeout(() => {
          sendOrder();
        }, 1500);
      };
      
      // Отправка заказа
      window.sendOrder = async function() {
        const steamLogin = document.getElementById("steamLogin").value.trim();
        const tgNick = document.getElementById("tgNick").value.trim();
        const amount = +amountRange.value;
        const base = amount * rate;
        const final = promoApplied ? base * (1 - discountRate) : base;
        
        const data = {
          content: "**Новый заказ KrolPay**",
          embeds: [{
            title: "Детали заказа",
            color: 16761035,
            fields: [
              { name: "Логин Steam", value: steamLogin, inline: true },
              { name: "Telegram", value: tgNick, inline: true },
              { name: "Сумма внутр.", value: amount + " ₽", inline: true },
              { name: "Итого к оплате", value: final + " ₽", inline: true },
              { name: "Промокод", value: promoApplied ? "KotoKrol (5%)" : "Нет", inline: true }
            ],
            timestamp: new Date().toISOString()
          }]
        };
        
        try {
          await fetch(config.webhookUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
          });
          
          // Обновляем счетчики
          if (config.initialClientsCount !== "1000+") {
            ordersCount += 1;
          }
          totalAmount += amount;
          updateCounters();
          
          // Показываем успешное сообщение
          resultMsg.classList.remove('hidden');
          resultText.textContent = "Заказ отправлен! Менеджер напишет вам в Telegram в течение 5 минут.";
          resultMsg.className = "mt-4 text-center text-sm";
          resultText.className = "text-emerald-400";
          
          showNotification('Заказ успешно оформлен!', 'success');
          
          // Сбрасываем кнопку
          const submitBtn = document.getElementById("submitBtn");
          submitBtn.innerHTML = 'Оформить заказ';
          submitBtn.disabled = false;
          
        } catch(e) {
          resultMsg.classList.remove('hidden');
          resultText.textContent = "Ошибка при отправке заказа. Попробуйте еще раз или свяжитесь с поддержкой.";
          resultText.className = "text-rose-400";
          
          showNotification('Ошибка при отправке заказа', 'error');
          
          // Сбрасываем кнопку
          const submitBtn = document.getElementById("submitBtn");
          submitBtn.innerHTML = 'Оформить заказ';
          submitBtn.disabled = false;
        }
      };
      
      // Показать уведомление
      window.showNotification = function(text, type = 'info') {
        const notification = document.getElementById('notification');
        const icon = document.getElementById('notification-icon');
        const textEl = document.getElementById('notification-text');
        
        textEl.textContent = text;
        
        switch(type) {
          case 'success':
            icon.className = 'fas fa-check-circle text-emerald-400 text-xl';
            break;
          case 'error':
            icon.className = 'fas fa-exclamation-circle text-rose-400 text-xl';
            break;
          default:
            icon.className = 'fas fa-info-circle text-cyan-400 text-xl';
        }
        
        // Показываем уведомление
        notification.classList.add('show');
        
        // Автоматическое скрытие через 5 секунд
        setTimeout(() => {
          notification.classList.remove('show');
        }, 5000);
      };
      
      // Модальное окно
      window.showModal = function(title, content) {
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        
        modalTitle.textContent = title;
        modalContent.innerHTML = content;
        modal.classList.remove('opacity-0');
        modal.classList.remove('pointer-events-none');
        
        setTimeout(() => {
          modal.querySelector('div').classList.remove('scale-95');
        }, 10);
      };
      
      window.closeModal = function() {
        const modal = document.getElementById('modal');
        modal.querySelector('div').classList.add('scale-95');
        modal.classList.add('opacity-0');
        modal.classList.add('pointer-events-none');
      };
      
      window.showTerms = function() {
        showModal('Условия обслуживания', `
          <p>1. Вы должны быть старше 18 лет или иметь разрешение от родителей</p>
          <p>2. Мы не несем ответственности за блокировки аккаунта, вызванные нарушением правил Steam</p>
          <p>3. Средства возврату не подлежат, за исключением технических сбоев</p>
          <p>4. Администрация оставляет за собой право отказать в обслуживании без объяснения причин</p>
        `);
      };
      
      window.showPrivacy = function() {
        showModal('Политика конфиденциальности', `
          <p>1. Мы собираем только необходимые данные для обработки вашего заказа</p>
          <p>2. Ваши данные не передаются третьим лицам</p>
          <p>3. Мы используем cookies для улучшения работы сервиса</p>
          <p>4. Вы можете запросить удаление ваших данных, написав в поддержку</p>
        `);
      };
      
      // Анимации при прокрутке
      const elements = document.querySelectorAll('.fade-in, .slide-up, .scale-in, .reveal');
      
      function checkVisibility() {
        const triggerBottom = window.innerHeight * 0.85;
        
        elements.forEach(el => {
          const box = el.getBoundingClientRect();
          if(box.top < triggerBottom) {
            el.classList.add('visible');
            el.classList.add('active');
          }
        });
      }
      
      // Инициализация
      updateSum();
      updateCounters();
      checkVisibility();
      
      window.addEventListener('scroll', checkVisibility);
      window.addEventListener('load', checkVisibility);
      
      // Показываем приветственное уведомление
      setTimeout(() => {
        showNotification('Добро пожаловать в KrolPay! Используйте промокод KotoKrol для скидки 5%', 'info');
      }, 1000);
    });
  </script>
</body>
</html>